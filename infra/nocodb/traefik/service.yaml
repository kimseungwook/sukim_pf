apiVersion: v1
kind: Service
metadata:
  name: traefik
  namespace: kube-system  # Traefik가 배포된 네임스페이스
  annotations:
    service.beta.kubernetes.io/oci-load-balancer-ssl-ports: "443"  # HTTPS 트래픽을 포트 443으로 지정
    service.beta.kubernetes.io/oci-load-balancer-backend-protocol: "HTTP"  # OCI Load Balancer가 백엔드로 HTTP 트래픽을 전송하도록 설정
spec:
  type: LoadBalancer
  ports:
    - name: web
      port: 80  # OCI Load Balancer가 HTTP 및 HTTPS 트래픽을 모두 전송할 포트
      targetPort: web  # Traefik 서비스 내부의 대상 포트
    - name: websecure
      port: 443  # OCI Load Balancer의 SSL 리스너 포트
      targetPort: web  # HTTPS 트래픽을 HTTP로 터미네이션하고 포트 80으로 전송하도록 설정
  selector:
    app: traefik  # Traefik Pod을 선택하는 데 사용되는 라벨
