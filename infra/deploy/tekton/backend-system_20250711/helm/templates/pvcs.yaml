# ëª¨ë“ˆë³„ë¡œ ì‹œì¸ì„± ì¢‹ê²Œ ì •ë¦¬ëœ PVC í…œí”Œë¦¿
# templates/pvcs.yaml
# ===================================================================

# ğŸ”· SYSTEM ëª¨ë“ˆ PVC
# ===================================================================

# System Workspace PVC
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Values.system.pvc.workspace }}
  namespace: tekton-pipelines
  labels:
    {{- include "backend-system.labels" . | nindent 4 }}
    module: system
    type: workspace
  annotations:
    description: "System ëª¨ë“ˆ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ PVC (ReadWriteOnce)"
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: {{ .Values.storage_ClassName }}
  resources:
    requests:
      storage: 5Gi

# System Cache PVC
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Values.system.pvc.cache }}
  namespace: tekton-pipelines
  labels:
    {{- include "backend-system.labels" . | nindent 4 }}
    module: system
    type: cache
  annotations:
    description: "System ëª¨ë“ˆ Gradle ìºì‹œ PVC"
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: {{ .Values.storage_ClassName }}
  resources:
    requests:
      storage: {{ .Values.storage_size }}

# ===================================================================
# ğŸ”¶ PORTAL ëª¨ë“ˆ PVC
# ===================================================================

# Portal Workspace PVC
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Values.portal.pvc.workspace }}
  namespace: tekton-pipelines
  labels:
    {{- include "backend-system.labels" . | nindent 4 }}
    module: portal
    type: workspace
  annotations:
    description: "Portal ëª¨ë“ˆ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ PVC (ReadWriteOnce)"
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: {{ .Values.storage_ClassName }}
  resources:
    requests:
      storage: 5Gi

# Portal Cache PVC
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Values.portal.pvc.cache }}
  namespace: tekton-pipelines
  labels:
    {{- include "backend-system.labels" . | nindent 4 }}
    module: portal
    type: cache
  annotations:
    description: "Portal ëª¨ë“ˆ Gradle ìºì‹œ PVC"
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: {{ .Values.storage_ClassName }}
  resources:
    requests:
      storage: {{ .Values.storage_size }}

# ===================================================================
# ğŸ”¸ AIFY ëª¨ë“ˆ PVC
# ===================================================================

# Aify Workspace PVC
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Values.aify.pvc.workspace }}
  namespace: tekton-pipelines
  labels:
    {{- include "backend-system.labels" . | nindent 4 }}
    module: aify
    type: workspace
  annotations:
    description: "Aify ëª¨ë“ˆ ì›Œí¬ìŠ¤í˜ì´ìŠ¤ PVC (ReadWriteOnce)"
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: {{ .Values.storage_ClassName }}
  resources:
    requests:
      storage: 5Gi

# Aify Cache PVC
---
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: {{ .Values.aify.pvc.cache }}
  namespace: tekton-pipelines
  labels:
    {{- include "backend-system.labels" . | nindent 4 }}
    module: aify
    type: cache
  annotations:
    description: "Aify ëª¨ë“ˆ Gradle ìºì‹œ PVC"
spec:
  accessModes:
    - ReadWriteOnce
  storageClassName: {{ .Values.storage_ClassName }}
  resources:
    requests:
      storage: {{ .Values.storage_size }}

# ===================================================================
# ğŸ“Š PVC ìš”ì•½ ì •ë³´
# ===================================================================
# 
# ìƒì„±ë˜ëŠ” PVCë“¤:
# 
# ğŸ”· System ëª¨ë“ˆ:
#   - gointern-backend-system (Workspace, 5Gi)
#   - gointern-system-gradle-cache (Cache, 10Gi)
# 
# ğŸ”¶ Portal ëª¨ë“ˆ:
#   - gointern-backend-portal (Workspace, 5Gi)  
#   - gointern-portal-gradle-cache (Cache, 10Gi)
# 
# ğŸ”¸ Aify ëª¨ë“ˆ:
#   - gointern-backend-aify (Workspace, 5Gi)
#   - gointern-aify-gradle-cache (Cache, 10Gi)
# 
# ì´ 6ê°œ PVC, ê°ê° ReadWriteOnceë¡œ ë…ë¦½ì  ìš´ì˜
# ===================================================================